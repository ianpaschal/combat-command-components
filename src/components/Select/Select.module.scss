@use "../../style/text";
@use "../../style/flex";
@use "../../style/shadows";

// Design System Variables
:root {
  --select-font-family: "SÃ¶hne", "Helvetica Neue", -apple-system, sans-serif;
  --select-bg: #fff;
  --select-border: #d4d4d8;
  --select-border-hover: #a1a1aa;
  --select-border-focus: #18181b;
  --select-text: #18181b;
  --select-text-secondary: #71717a;
  --select-placeholder: #a1a1aa;
  --select-option-hover: #f4f4f5;
  --select-option-selected: #fafafa;
  --select-option-focus: #e4e4e7;
  --select-shadow-sm: 0 1px 2px rgb(0 0 0 / 4%);
  --select-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 8%), 0 2px 4px -2px rgb(0 0 0 / 4%);
  --select-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 10%), 0 4px 6px -4px rgb(0 0 0 / 8%);
  --select-radius: 8px;
  --select-transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.select {
  &-trigger {
    position: relative;

    display: grid;
    grid-template-areas: "value icon";
    grid-template-columns: 1fr 1rem;
    gap: 0.5rem;

    width: 100%;

    transition: var(--select-transition);

    &[data-placeholder] {
      color: var(--select-placeholder);
    }
  }

  &-value {
    @include text.single-line;

    overflow: hidden;
    grid-area: value;
    align-self: center;
    justify-self: start;

    width: 100%;

    font-weight: 400;
    text-align: start;
  }

  &-icon {
    grid-area: icon;
    align-self: center;
    justify-self: center;

    aspect-ratio: 1;
    width: 100%;

    svg {
      display: block;
      aspect-ratio: 1;
      width: 100%;
    }
  }

  &-positioner {
    max-height: var(--available-height);
  }
}

.select-popup {
  @include flex.column($gap: 0.25rem);
  @include shadows.elevated;

  scroll-behavior: smooth;

  transform-origin: var(--transform-origin);

  overflow-x: hidden;
  overflow-y: auto;
  overscroll-behavior: contain;

  width: var(--anchor-width);
  max-height: var(--available-height);
  padding: 0.25rem;

  box-shadow: var(--select-shadow-lg);

  animation: select-popup-fade-in 150ms cubic-bezier(0.16, 1, 0.3, 1);

  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    margin: 8px 0;
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    border: 2px solid var(--select-bg);
    border-radius: 10px;
    background: var(--select-border);

    &:hover {
      background: var(--select-border-hover);
    }
  }
}

@keyframes select-popup-fade-in {
  from {
    transform: scale(0.9);
    opacity: 0;
  }

  to {
    transform: scale(1);
    opacity: 1;
  }
}

.select-arrow {
  z-index: 1;
  display: block;
  color: var(--select-bg);
  filter: drop-shadow(0 -1px 1px rgb(0 0 0 / 6%));

  svg {
    display: block;
  }
}

.select-item {
  cursor: pointer;

  position: relative;

  display: grid;
  grid-template-areas: "text indicator";
  grid-template-columns: 1fr 1rem;
  gap: 0.5rem;

  font-weight: 400;

  // min-height: 40px;
  // padding: 8px 12px;
  // border-radius: 6px;

  // font-size: 15px;
  // font-weight: 450;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  // line-height: 1.5;

  // color: var(--select-text);

  outline: none;

  transition: var(--select-transition);

  &-text {
    @include text.ui($bold: true);

    grid-area: text;
    align-self: center;
    justify-self: start;
    transition: var(--select-transition);

    [data-highlighted] & {
      transform: translateX(2px);
    }
  }

  &-indicator {
    display: none;
    grid-area: indicator;
    align-self: center;
    justify-self: center;

    aspect-ratio: 1;
    width: 100%;

    svg {
      display: block;
      aspect-ratio: 1;
      width: 100%;
    }

    [data-selected] & {
      display: block;
      animation: select-check-in 240ms cubic-bezier(0.16, 1, 0.3, 1);
    }
  }

  &:focus-visible {
    background: var(--select-option-focus);
    box-shadow: inset 0 0 0 2px var(--select-border-focus);
  }

  &:hover:not([data-disabled]) {
    // transform: translateX(2px);
    background: var(--select-option-hover);
  }

  &[data-highlighted] {
    background: var(--select-option-hover);
  }

  &[data-selected] {
    font-weight: 500;
    background: var(--select-option-selected);

    &:hover {
      background: var(--select-option-focus);
    }
  }

  &[data-disabled] {
    cursor: not-allowed;
    color: var(--select-text-secondary);
    opacity: 0.4;
  }
}

@keyframes select-check-in {
  from {
    transform: scale(0.9);
    opacity: 0;
  }

  to {
    transform: scale(1);
    opacity: 1;
  }
}
